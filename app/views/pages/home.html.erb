<% if user_signed_in? %>
  <div class="container">
  <h1>Perfect Night</h1>
    <div class="search-bar">
    <br>
      <%= form_with url: activities_path, method: :get, class: "d-flex" do %>
        <%= text_field_tag :query,
          params[:query],
          class: "form-control",
          placeholder: "Recherche"
        %>
        <%= submit_tag "Search", class: "btn-purple" %>
      <% end %>
    </div>
    <br>

    <h1 class="title"> Evènements populaires </h1>
    <br>

    <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="true">
      <div class="carousel-inner">
        <% @activities.each_with_index do |activity, index| %>
          <% if index == 0 %>
            <div class="carousel-item active">
              <%= cl_image_tag activity.photo.key, width: 400, height: 400, crop: :fill, class: "d-block w-100", alt: activity.name %>
            </div>
          <% else %>
            <div class="carousel-item">
              <%= cl_image_tag activity.photo.key, width: 400, height: 400, crop: :fill, class: "d-block w-100", alt: activity.name %>
            </div>
          <% end %>
        <% end %>
      </div>

      <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>
  <div>
    <% @activities.each do |activity|%>
      <%= link_to "Voir plus d'évènements", activity_path(activity)%>
    <%end%>
  </div>
</div>
<% end %>

  <%# <div class="button-show">
    <%= link_to "Voir plus d'évènements", activity_path(activity) %>
  <%# </div> %>
