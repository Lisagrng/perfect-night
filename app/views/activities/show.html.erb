<div class= "container container-show">

  <div class= "logo">
    <%= image_tag("logo.png")%>
  </div>

  <div class= "image-show">
    <%= cl_image_tag @activity.photo.key%>
  </div>

  <h2> <%= @activity.name %></h2>

  <div class="show-description">
    <div class="show-address">
      <i class="fa-solid fa-location-dot"></i><span><%= @activity.address %></span></i>
    </div>

    <div class="show-time">
      <% if @activity.workshop? %>
        <i class="fa-regular fa-calendar"><span><%= DateTime.parse(@activity.start_at).strftime("%H:%M") %> - <%=DateTime.parse(@activity.end_at).strftime("%H:%M") %></span></i>
      <% else %>
        <i class="fa-regular fa-calendar"><span><%= DateTime.parse(@activity.open_at).strftime("%H:%M") %> - <%=DateTime.parse(@activity.close_at).strftime("%H:%M") %></span></i>
      <% end %>
    </div>

    <h3>Description</h3>
    <p><%= @activity.description%></p>
  </div>

  <div style="width: 100%; height: 600px;"
    data-controller="map"
    data-map-markers-value="<%= @marker.to_json %>"
    data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>

  <div class="show-reviews">
    <h3>Reviews</h3>
    <br>
    <br>
      <div class="reviews-form">
        <%= simple_form_for([@activity, @review]) do |f| %>
          <%= f.input :rating %>
          <%= f.input :content %>
          <%= f.button :submit %>
        <% end %>
      </div>
    <ul class="list-group">
      <% if @activity.reviews.blank? %>
      <p>Soyez le premier à ajouter un avis pour <%= @activity.name %></p>
      <% else %>
        <% @console.reviews.each do |review| %>
            <% if review.rating == 5 %>
                <li class="list-item">
                  <%= review.content %><span style="color: gold;">★★★★★</span>
                  <%= link_to "Supprimer",
                    review_path(review), class: "delete-button",
                    data: {turbo_method: :delete, turbo_confirm: "Êtes-vous sûre de vouloir supprimer ce commentaire?"}
                  %>
                </li>
              <% elsif review.rating == 4 %>
                <li class="list-item">
                  <%= review.content %><span style="color: gold;">★★★★</span>
                  <%= link_to "[Supprimer]",
                    review_path(review), class: "delete-button",
                    data: {turbo_method: :delete, turbo_confirm: "Êtes-vous sûre de vouloir supprimer ce commentaire?"}
                  %>
                </li>
              <% elsif review.rating == 3 %>
                <li class="list-item">
                  <%= review.content %><span style="color: gold;">★★★</span>
                  <%= link_to "[Supprimer]",
                    review_path(review), class: "delete-button",
                    data: {turbo_method: :delete, turbo_confirm: "Êtes-vous sûre de vouloir supprimer ce commentaire?"}
                  %>
                </li>
              <% elsif review.rating == 2 %>
                <li class="list-item">
                  <%= review.content %> <span style="color: gold;">★★</span>
                  <%= link_to "[Supprimer]",
                    review_path(review), class: "delete-button",
                    data: {turbo_method: :delete, turbo_confirm: "Êtes-vous sûre de vouloir supprimer ce commentaire?"}
                  %>
                </li>
              <% else %>
                <li class="list-item">
                  <%= review.content %> <span style="color: gold;">★</span>
                  <%= link_to "[Supprimer]",
                    review_path(review), class: "delete-button",
                    data: {turbo_method: :delete, turbo_confirm: "Êtes-vous sûre de vouloir supprimer ce commentaire?"}
                  %>
                </li>
            <% end %>
          <% end %>
      <% end %>
    </ul>
    <br>
  </div>
</div>
